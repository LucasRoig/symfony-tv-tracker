{% extends 'media.html.twig' %}
{% block background_url %}{{ season.show.backdropPath }}{% endblock %}
    {% block media_poster %}
        <img src="https://image.tmdb.org/t/p/w92/{{ season.posterPath}}" alt="">
    {% endblock %}

    {% block media_text %}
        <h2>
            <a href="{{ path('show_show',{showId:season.show.tmdbId}) }}">{{ season.show.name }}</a>
        </h2>
        <h1>Saison {{ season.seasonNumber }}
            <span class="date">{{ season.airDate | date('Y') }}</span>
        </h1>
    {% endblock %}

    {% block media_actions %}
        <div class="action {{ season.hasPreviousSeason() ? '' : 'hidden' }}">
            <a href="{{ season.hasPreviousSeason() ? path('season_show',{showId:season.show.tmdbId,seasonNumber:season.seasonNumber - 1}) : '#' }}">
                <i class="material-icons">chevron_left</i>
            </a>
        </div>
        <div class="action">
            <i class="material-icons">done_all</i>Marquer comme vu
        </div>
        <div class="action {{ season.hasNextSeason() ? '' : 'hidden' }}">
            <a href="{{ season.hasNextSeason() ? path('season_show',{showId:season.show.tmdbId,seasonNumber:season.seasonNumber + 1}) : '#' }}">
                <i class="material-icons">chevron_right</i>
            </a>
        </div>
    {% endblock %}

    {% block content %}
        {#{{ dump(season) }}#}
        <section>
            <ul class="tabs">
                <li class="tab col s3">
                    <a class="active" href="#synopsis">Synopsis</a>
                </li>
                <li class="tab col s3">
                    <a href="#episodes">Episodes</a>
                </li>
            </ul>
            <div class="container">
                <div id="synopsis" class="col s12">
                    {{ season.overview ? season.overview : "Le synopsis n'est pas disponible"}}
                </div>
                <div id="episodes" class="col s12 episodes">
                    {% for episode in season.episodes %}
                        <div class="episode">
                            <div>
                                <h1>
                                    <a href="{{ path('episode_show',{showId:season.show.tmdbId,seasonNumber:season.seasonNumber,episodeNumber:episode.episodeNumber}) }}">{{ season.seasonNumber }}x{{ episode.episodeNumber }} -
                                        {{ episode.name }}</a>
                                </h1>
                                <h2>{{ episode.airDate | date('d-m-Y') }}</h2>
                            </div>
                            <button class="btn waves-effect waves-light green">
                                <i class="material-icons">check</i>
                            </button>
                        </div>
                    {% else %}
                        Aucun Ã©pisode pour l'instant.
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endblock %}